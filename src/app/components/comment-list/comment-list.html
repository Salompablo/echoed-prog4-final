<div class="comment-list-container">
  @if (isLoading()) {
  <div class="loading-state">
    <app-loading-spinner message="Loading comments..."></app-loading-spinner>
  </div>
  } @else if (error()) {
  <div class="error-state">
    <p>{{ error() }}</p>
  </div>
  } @else if (comments().length === 0) {
  <div class="empty-state">
    <p>No comments yet. Be the first to comment!</p>
  </div>
  } @else {
  <div class="comments-wrapper">
    @for (comment of comments(); track comment.commentId) {
    <app-comment-card
      [comment]="comment"
      [reviewType]="reviewType"
      [reviewId]="reviewId"
      (editRequest)="onEditRequest($event)"
      (deleteEvent)="removeComment($event)"
    />
    }
  </div>
  } @if (isLoadingMore()) {
  <app-loading-spinner message="Loading reviews..."></app-loading-spinner>
  } @if (hasMoreComments() && !isLoading() && !isLoadingMore()) {
  <div class="load-more-section">
    <button (click)="loadComments()" class="load-more-btn" [disabled]="isLoadingMore()">
      Load More Comments
    </button>
  </div>
  } @if (isEditModalVisible() && commentToEdit()) {
  <app-comment-modal
    [reviewId]="reviewId"
    [reviewType]="reviewType"
    [commentToEdit]="commentToEdit()"
    (close)="closeEditModal()"
    (submitted)="handleCommentUpdate($event)"
  />
  }
</div>
