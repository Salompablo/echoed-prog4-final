<div class="comment-list-container">
  
  @if (isLoading()) {
    <div class="loading-state">
      <p>Loading comments...</p>
    </div>
  } 
  @else if (error()) {
    <div class="error-state">
      <p>{{ error() }}</p>
    </div>
  } 
  @else if (comments().length === 0) {
    <div class="empty-state">
      <p>No comments yet. Be the first to comment!</p>
    </div>
  } 
  @else {
    <div class="comments-wrapper">
      @for (comment of comments(); track comment.commentId) {
        <app-comment-card 
        [comment]="comment"
        [reviewType]="reviewType"
        [reviewId]="reviewId"
        (editRequest)="onEditRequest($event)"
        (deleteEvent)="removeComment($event)"
        />
      }
    </div>
  }

  @if (isLoadingMore()) {
    <div class="loading-more-state">
      <p>Loading more...</p>
    </div>
  }

  @if (hasMoreComments() && !isLoading() && !isLoadingMore()) {
    <div class="load-more-section">
      <button (click)="loadComments()" class="load-more-btn" [disabled]="isLoadingMore()">
        Load More Comments
      </button>
    </div>
  }

  @if (isEditModalVisible() && commentToEdit()) {
    <app-comment-modal
      [reviewId]="reviewId"
      [reviewType]="reviewType"
      [commentToEdit]="commentToEdit()" (close)="closeEditModal()"
      (submitted)="handleCommentUpdate($event)" />
  }
  </div>