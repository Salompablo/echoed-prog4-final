<div class="comment-card card">
  <div class="comment-header">

    <div class="user-avatar-info-wrapper">

      <img [src]="userAvatarUrl()" [alt]="user()?.username + 'avatar'" class="user-avatar">
      <a [routerLink]="['/profile', comment.userId]" class="comment-username">
        @{{ comment.username }}
      </a>

      <div class="comment-meta-actions">
        @if (isOwner()) {
        <div class="comment-actions">
          <button (click)="onEditRequest()" class="action-button edit-btn" aria-label="Edit comment">
            <span class="material-symbols-rounded">edit</span>
          </button>
          <button (click)="onDeleteComment()" class="action-button delete-btn" aria-label="Delete">
            <span class="material-symbols-rounded">delete</span>
          </button>
        </div>
        }
      </div>

    </div>
    <span class="comment-date">{{ comment.createdAt | date:'short' }}</span>
  </div>

  <div class="comment-body">
    <p>{{ comment.text }}</p>
  </div>
</div>

@if (isDeleteModalVisible()) {
<app-delete-confirmation-modal [target]="deletionTarget()" [isLoading]="isDeleting()" (confirm)="onConfirmDelete()"
  (close)="onCloseDeleteModal()" />
}

  <div class="comment-footer">
    <app-reaction-bar [reactedType]="reactedTypes.COMMENT" [parentId]="comment.commentId"
      [userReaction]="comment.userReaction" [totalLikes]="comment.totalLikes" [totalDislikes]="comment.totalDislikes"
      [totalWows]="comment.totalWows" [totalLoves]="comment.totalLoves" (reactionChange)="onReactionChanged($event)" />
  </div>
</div>
